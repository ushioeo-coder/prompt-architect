<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8+1 Prompt Architect</title>
    <meta name="description" content="AIプロンプトを段階的に構築する高機能ツール">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Inter:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="logo">
                <span class="logo-icon">✨</span>
                <h1>8+1 Prompt Architect</h1>
            </div>
            <p class="tagline">高品質なAIプロンプトを段階的に構築</p>

            <!-- API Key Settings -->
            <div class="api-key-section">
                <button class="api-key-toggle" id="apiKeyToggle">
                    <span class="key-icon">🔑</span>
                    <span id="apiKeyStatus">APIキーを設定</span>
                </button>
                <div class="api-key-panel hidden" id="apiKeyPanel">
                    <div class="api-key-input-wrapper">
                        <input type="password" id="apiKeyInput" placeholder="Gemini APIキーを入力">
                        <button class="api-key-save" id="apiKeySave">保存</button>
                    </div>
                    <p class="api-key-hint">キーはブラウザに安全に保存されます（サーバーには送信されません）</p>
                </div>
            </div>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="step-indicators" id="stepIndicators">
                <!-- Steps will be generated by JS -->
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Step 01: 前提条件 -->
            <section class="step-section active" data-step="1">
                <div class="step-header">
                    <span class="step-number">01</span>
                    <h2>前提条件を設定</h2>
                </div>
                <div class="step-content">
                    <div class="input-group">
                        <label for="goalInput">ゴールと成果物</label>
                        <p class="input-hint">達成したい目標と、最終的に作成したい成果物を具体的に記述してください</p>
                        <textarea id="goalInput" placeholder="例：中小企業向けのSNSマーケティング戦略を提案するレポートを作成したい"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="referenceInput">参考情報・変数（任意）</label>
                        <p class="input-hint">プロンプトに組み込みたい具体的な情報、データ、条件などを入力してください</p>
                        <textarea id="referenceInput"
                            placeholder="例：対象業種：飲食店、予算：月5万円以内、ターゲット年齢：20-40代、使用SNS：Instagram, LINE"></textarea>
                    </div>
                    <div class="generated-content" id="step1Result">
                        <!-- Generated content will appear here -->
                    </div>
                </div>
            </section>

            <!-- Step 02: 読み手ペルソナ -->
            <section class="step-section" data-step="2">
                <div class="step-header">
                    <span class="step-number">02</span>
                    <h2>読み手ペルソナを作成</h2>
                </div>
                <div class="step-content">
                    <div class="skip-section">
                        <button class="skip-btn" id="skipReaderBtn">
                            <span>🚫</span> 今回は不要
                        </button>
                    </div>
                    <div class="input-group" id="readerInputGroup">
                        <label for="readerInput">読み手の情報</label>
                        <p class="input-hint">成果物を読む人の特徴や背景を記述してください</p>
                        <textarea id="readerInput" placeholder="例：IT知識が少ない中小企業の経営者、50代男性、従来の営業手法に限界を感じている"></textarea>
                    </div>
                    <div class="skipped-notice hidden" id="readerSkippedNotice">
                        <p>✓ このステップはスキップされました</p>
                        <button class="undo-skip-btn" id="undoReaderSkipBtn">取り消す</button>
                    </div>
                    <div class="generated-content" id="step2Result">
                        <!-- Generated content will appear here -->
                    </div>
                </div>
            </section>

            <!-- Step 03: 書き手ペルソナ -->
            <section class="step-section" data-step="3">
                <div class="step-header">
                    <span class="step-number">03</span>
                    <h2>書き手ペルソナを作成</h2>
                </div>
                <div class="step-content">
                    <div class="skip-section">
                        <button class="skip-btn" id="skipWriterBtn">
                            <span>🚫</span> 今回は不要
                        </button>
                    </div>
                    <div class="input-group" id="writerInputGroup">
                        <label for="writerInput">書き手の情報</label>
                        <p class="input-hint">AIが模倣すべき書き手の人物像を記述してください</p>
                        <textarea id="writerInput" placeholder="例：マーケティングコンサルタント、10年以上の経験、親しみやすい口調"></textarea>
                    </div>
                    <div class="skipped-notice hidden" id="writerSkippedNotice">
                        <p>✓ このステップはスキップされました</p>
                        <button class="undo-skip-btn" id="undoWriterSkipBtn">取り消す</button>
                    </div>
                    <div class="generated-content" id="step3Result">
                        <!-- Generated content will appear here -->
                    </div>
                </div>
            </section>

            <!-- Step 04 is hidden (automatic processing) -->

            <!-- Step 05: 実行指示 -->
            <section class="step-section" data-step="5">
                <div class="step-header">
                    <span class="step-number">05</span>
                    <h2>実行指示を選択</h2>
                </div>
                <div class="step-content">
                    <p class="step-description">AIが生成した5つの実行指示案から、最適なものを選択してください</p>
                    <div class="instruction-cards" id="instructionCards">
                        <!-- Cards will be generated by JS -->
                    </div>
                    <div class="custom-instruction">
                        <label for="customInstruction">選択した指示をカスタマイズ（任意）</label>
                        <textarea id="customInstruction" placeholder="選択した指示文を微調整できます"></textarea>
                    </div>
                </div>
            </section>

            <!-- Step 06: 出力形式 -->
            <section class="step-section" data-step="6">
                <div class="step-header">
                    <span class="step-number">06</span>
                    <h2>出力形式を選択</h2>
                </div>
                <div class="step-content">
                    <p class="step-description">成果物に最適な出力形式を選択してください</p>
                    <div class="format-options" id="formatOptions">
                        <!-- Options will be generated by JS -->
                    </div>
                </div>
            </section>

            <!-- Step 07: スタイルとトーン -->
            <section class="step-section" data-step="7">
                <div class="step-header">
                    <span class="step-number">07</span>
                    <h2>スタイルとトーンを選択</h2>
                </div>
                <div class="step-content">
                    <div class="style-tone-grid">
                        <div class="style-section">
                            <h3>文章スタイル</h3>
                            <div class="style-options" id="styleOptions">
                                <!-- Options will be generated by JS -->
                            </div>
                        </div>
                        <div class="tone-section">
                            <h3>文章トーン</h3>
                            <div class="tone-options" id="toneOptions">
                                <!-- Options will be generated by JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Step 08: 出力フォーマット -->
            <section class="step-section" data-step="8">
                <div class="step-header">
                    <span class="step-number">08</span>
                    <h2>出力フォーマットを設定</h2>
                </div>
                <div class="step-content">
                    <div class="input-group">
                        <label for="outputFormat">出力フォーマット</label>
                        <p class="input-hint">成果物の構造テンプレートを編集してください</p>
                        <textarea id="outputFormat" class="code-textarea" placeholder="出力フォーマットがここに表示されます"></textarea>
                    </div>
                </div>
            </section>

            <!-- Step +1: 総仕上げ -->
            <section class="step-section" data-step="9">
                <div class="step-header">
                    <span class="step-number">+1</span>
                    <h2>プロンプトの総仕上げ</h2>
                </div>
                <div class="step-content">
                    <div class="evaluation-section">
                        <h3>評価指針に基づく分析</h3>
                        <div class="evaluation-grid" id="evaluationGrid">
                            <!-- Evaluation items will be generated by JS -->
                        </div>
                    </div>
                    <div class="final-prompt-section">
                        <h3>改善後のプロンプト</h3>
                        <div class="final-prompt-container">
                            <pre class="final-prompt" id="finalPrompt"><!-- Final prompt will appear here --></pre>
                            <button class="copy-btn" id="copyBtn">
                                <span class="copy-icon">📋</span>
                                コピー
                            </button>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Navigation -->
        <nav class="step-navigation">
            <button class="nav-btn prev-btn" id="prevBtn" disabled>
                <span>←</span> 前へ
            </button>
            <button class="nav-btn next-btn" id="nextBtn">
                次へ <span>→</span>
            </button>
            <button class="nav-btn generate-btn" id="generateBtn">
                <span class="loading-spinner hidden"></span>
                <span class="btn-text">生成する</span>
            </button>
        </nav>

        <!-- Loading Overlay -->
        <div class="loading-overlay hidden" id="loadingOverlay">
            <div class="loading-content">
                <div class="loading-animation">
                    <div class="loader"></div>
                </div>
                <p class="loading-text" id="loadingText">AIが最適なプロンプトを生成中...</p>
            </div>
        </div>

        <!-- Toast Notification -->
        <div class="toast hidden" id="toast">
            <span class="toast-message"></span>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>